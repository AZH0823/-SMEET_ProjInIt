<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <title>動態管理</title>
</head>

<body>
    <div class="back_news fulid_wrapper">
        <div class="backwrapper">
            <header>
                @@include('layout/back_header.html')
            </header>

            <div class="container">
                <!-- test -->
                <main class="right_content">
                    <section class="section1">
                        <!-- form -->
                        <div class="back_from">

                            <div class="back_fromTitle">
                                <h4 class="h4 green-1">所有動態管理</h4>
                                <div class="search">
                                    <div class="insert_btn" style="color: #898989;">新增</div>
                                    <div class="search_container_item">
                                        <input type="text" placeholder="動態查詢..." />
                                    </div>
                                    <div class="search_container_item">
                                        <i class="fa-solid fa-magnifying-glass"></i>
                                    </div>
                                </div>
                            </div>


                            <div class="back_from_wrapper">

                                <!-- row-1 -->
                                <div class="grid_container">
                                    <div class="grid_item">公告類型</div>
                                    <div class="grid_item">公告日期</div>
                                    <div class="grid_item">公告主題</div>
                                    <div class="grid_item">內文</div>
                                    <div class="grid_item">狀態</div>
                                    <div class="grid_item">操作</div>
                                </div>
                                <!-- row-2 -->
                                <div class="grid_container" v-for="News in BackNewsList" :key="index">
                                    <div class="grid_item">
                                        <!-- 最新動態 -->
                                        {{News.Category}}
                                    </div>
                                    <div class="grid_item">
                                        <!-- 2022/11/25 -->
                                        {{News.Date}}
                                    </div>
                                    <div class="grid_item">
                                        <!-- 冬季暖心 -->
                                        {{News.Title}}
                                    </div>
                                    <div class="grid_item">
                                        <!-- 鮟鱇魚富含膠原蛋白且低... -->
                                        {{News.Article}}
                                    </div>
                                    <div class="grid_item">
                                        <label class="switch">
                                            <input type="checkbox" class="switch_btn" checked>
                                            <span class="slider"></span>
                                            <p class="slider_content">上架</p>
                                        </label>
                                    </div>
                                    <div class="grid_item checked">查看</div>
                                </div>

                                <!-- row-3 -->
                                <!-- <div class="grid_container">
                                    <div class="grid_item">最新動態</div>
                                    <div class="grid_item">2022/11/25</div>
                                    <div class="grid_item">冬季暖心</div>
                                    <div class="grid_item">鮟鱇魚富含膠原蛋白且低...</div>
                                    <div class="grid_item">
                                        <label class="switch">
                                            <input type="checkbox" class="switch_btn" checked>
                                            <span class="slider"></span>
                                            <p class="slider_content">上架</p>
                                        </label>
                                    </div>
                                    <div class="grid_item checked">查看</div>
                                </div> -->

                                <!-- row-4 -->
                                <!-- <div class="grid_container">
                                    <div class="grid_item">最新動態</div>
                                    <div class="grid_item">2022/11/25</div>
                                    <div class="grid_item">冬季暖心</div>
                                    <div class="grid_item">鮟鱇魚富含膠原蛋白且低...</div>
                                    <div class="grid_item">
                                        <label class="switch">
                                            <input type="checkbox" class="switch_btn" checked>
                                            <span class="slider"></span>
                                            <p class="slider_content">上架</p>
                                        </label>
                                    </div>
                                    <div class="grid_item checked">查看</div>
                                </div> -->

                                <!-- row-5 -->
                                <!-- <div class="grid_container">
                                    <div class="grid_item">最新動態</div>
                                    <div class="grid_item">2022/11/25</div>
                                    <div class="grid_item">冬季暖心</div>
                                    <div class="grid_item">鮟鱇魚富含膠原蛋白且低...</div>
                                    <div class="grid_item">
                                        <label class="switch">
                                            <input type="checkbox" class="switch_btn" checked>
                                            <span class="slider"></span>
                                            <p class="slider_content">上架</p>
                                        </label>
                                    </div>
                                    <div class="grid_item checked">查看</div>
                                </div> -->

                                <!-- row-6 -->
                                <!-- <div class="grid_container">
                                    <div class="grid_item">最新動態</div>
                                    <div class="grid_item">2022/11/25</div>
                                    <div class="grid_item">冬季暖心</div>
                                    <div class="grid_item">鮟鱇魚富含膠原蛋白且低...</div>
                                    <div class="grid_item">
                                        <label class="switch">
                                            <input type="checkbox" class="switch_btn" checked>
                                            <span class="slider"></span>
                                            <p class="slider_content">上架</p>
                                        </label>
                                    </div>
                                    <div class="grid_item checked">查看</div>
                                </div> -->

                                <!-- row-6 -->
                                <!-- <div class="grid_container">
                                    <div class="grid_item">最新動態</div>
                                    <div class="grid_item">2022/11/25</div>
                                    <div class="grid_item">冬季暖心</div>
                                    <div class="grid_item">鮟鱇魚富含膠原蛋白且低...</div>
                                    <div class="grid_item">
                                        <label class="switch">
                                            <input type="checkbox" class="switch_btn" checked>
                                            <span class="slider"></span>
                                            <p class="slider_content">上架</p>
                                        </label>
                                    </div>
                                    <div class="grid_item checked">查看</div>
                                </div> -->

                                <!-- row-7 -->
                                <!-- <div class="grid_container">
                                    <div class="grid_item">最新動態</div>
                                    <div class="grid_item">2022/11/25</div>
                                    <div class="grid_item">冬季暖心</div>
                                    <div class="grid_item">鮟鱇魚富含膠原蛋白且低...</div>
                                    <div class="grid_item">
                                        <label class="switch">
                                            <input type="checkbox" class="switch_btn" checked>
                                            <span class="slider"></span>
                                            <p class="slider_content">上架</p>
                                        </label>
                                    </div>
                                    <div class="grid_item checked">查看</div>
                                </div> -->

                                <!-- row-8 -->
                                <!-- <div class="grid_container">
                                    <div class="grid_item">最新動態</div>
                                    <div class="grid_item">2022/11/25</div>
                                    <div class="grid_item">冬季暖心</div>
                                    <div class="grid_item">鮟鱇魚富含膠原蛋白且低...</div>
                                    <div class="grid_item">
                                        <label class="switch">
                                            <input type="checkbox" class="switch_btn" checked>
                                            <span class="slider"></span>
                                            <p class="slider_content">上架</p>
                                        </label>
                                    </div>
                                    <div class="grid_item checked">查看</div>
                                </div> -->

                                <!-- row-9 -->
                                <!-- <div class="grid_container">
                                    <div class="grid_item">最新動態</div>
                                    <div class="grid_item">2022/11/25</div>
                                    <div class="grid_item">冬季暖心</div>
                                    <div class="grid_item">鮟鱇魚富含膠原蛋白且低...</div>
                                    <div class="grid_item">
                                        <label class="switch">
                                            <input type="checkbox" class="switch_btn" checked>
                                            <span class="slider"></span>
                                            <p class="slider_content">上架</p>
                                        </label>
                                    </div>
                                    <div class="grid_item checked">查看</div>
                                </div> -->

                                <!-- row-10 -->
                                <!-- <div class="grid_container">
                                    <div class="grid_item">最新動態</div>
                                    <div class="grid_item">2022/11/25</div>
                                    <div class="grid_item">冬季暖心</div>
                                    <div class="grid_item">鮟鱇魚富含膠原蛋白且低...</div>
                                    <div class="grid_item">
                                        <label class="switch">
                                            <input type="checkbox" class="switch_btn" checked>
                                            <span class="slider"></span>
                                            <p class="slider_content">上架</p>
                                        </label>
                                    </div>
                                    <div class="grid_item checked">查看</div>
                                </div> -->

                                <!-- row-11 -->
                                <!-- <div class="grid_container">
                                    <div class="grid_item">最新動態</div>
                                    <div class="grid_item">2022/11/25</div>
                                    <div class="grid_item">冬季暖心</div>
                                    <div class="grid_item">鮟鱇魚富含膠原蛋白且低...</div>
                                    <div class="grid_item">
                                        <label class="switch">
                                            <input type="checkbox" class="switch_btn" checked>
                                            <span class="slider"></span>
                                            <p class="slider_content">上架</p>
                                        </label>
                                    </div>
                                    <div class="grid_item checked">查看</div>
                                </div> -->

                                <!-- row-12 -->
                                <!-- <div class="grid_container">
                                    <div class="grid_item">最新動態</div>
                                    <div class="grid_item">2022/11/25</div>
                                    <div class="grid_item">冬季暖心</div>
                                    <div class="grid_item">鮟鱇魚富含膠原蛋白且低...</div>
                                    <div class="grid_item">
                                        <label class="switch">
                                            <input type="checkbox" class="switch_btn" checked>
                                            <span class="slider"></span>
                                            <p class="slider_content">上架</p>
                                        </label>
                                    </div>
                                    <div class="grid_item checked">查看</div>
                                </div> -->
                            </div><!-- wrapper -->
                        </div><!-- back_from -->

                        <!-- 頁碼-->
                        <!-- <div class="page">
                            <ul class="page_ul">
                            <li><a href="#">1</a></li>
                            <li><a href="#">2</a></li>
                            <li><a href="#">3</a></li>
                            <li><a href="#">4</a></li>
                            </ul>
                        </div> -->
                    </section><!-- section1 -->
                </main>
                @@include('layout/back_footer.html')
            </div><!-- container -->

        </div>
        <!-- wrapper -->


        <div class="section_news">
            <div class="news_top">
                <p>新增動態</p>
            </div>
            <div class="news_type">
                <p>公告類型：</p>
                <select name="" id="">
                    <option value="">最新動態（預設）</option>
                    <option value="">聯名限定</option>
                    <option value="">限時優惠</option>
                </select>
            </div>
            <div class="news_date">
                <p>上架日期：</p>
                <input id="datepicker" placeholder="2022/01/13">
                <input placeholder="16：00">
            </div>
            <div class="news_title">
                <p>動態標題：</p>
                <input placeholder="秋季限定料理        （6/25）">
            </div>
            <div class="news_pic">
                <label type="button" class="btn">
                    <span>圖片：</span>
                    <input type="file" onchange="openFile(event)">
                    <img id="output" height="200" style="display:none">

                </label>
            </div>
            <div class="news_content">
                <h6>內容：</h6>
                <textarea>私覓主理人與多位摯友於1989年參加一場私廚派對，於派對中享用的鮮美食材仍深刻於心，多年後再度憶起來當年的感動，私覓主理人與專業團隊共同開發秋寄限定料理，希望再次複刻最初的感動。以鰹魚為食，輔以柑橘類的柚子醬『ポン酢』調味，再加一點梅子提味，提升整體的層次感。秋天的味蕾－松茸ごはん（松茸飯）」，使用昆布高湯，並將松茸與其他像是銀杏果等食材一同放進炊飯器煮。而秋天更不能錯過柿子、水梨，私覓嚴選千葉縣水梨，於前菜至主食期望帶給預約私覓的顧客，能和私覓主理人一同回到1989年的秋天，體驗這份私藏的心意。
                </textarea>
                <p>(0/300)</p>
                <button class="news_content_btn">儲存</button>
            </div>

        </div>

    </div>

    <script src="./js/vender/Jquery/jquery-3.6.1.js"></script><!-- JQ -->
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <!-- icon_cdn -->
    <script nomodule="nomodule" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <!-- icon_cdn -->
    <script src="./js/back_page/back_nav/back_nav.js"></script><!-- 導覽列 -->

    <script>
        const switchBtn = document.querySelectorAll(".switch_btn");
        const sliderContent = document.querySelectorAll(".slider_content");
        // console.log(switchBtn);

        for (let i = 0; i < switchBtn.length; i++) {
            // console.log(i)
            switchBtn[i].addEventListener("click", function () {
                console.log(this.checked); // ture /false
                console.log(i);
                console.log(this)

                if (this.checked == true) {

                    $(this).closest("label").find(".slider_content").text('啟用');
                } else {
                    $(this).closest("label").find(".slider_content").text('停權');
                }
            });
        }

    </script>

    <!-- 日期選擇器 -->
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
        let app1 = Vue.createApp({
            data() {
                return {
                    BackNewsList: [],
                };
            },
            created() {
                this.newsrender();
            },
            methods: {
                newsrender() {
                    let _this = this;

                    $.ajax({
                        method: "POST",
                        url: "php/frontpage/back_news.php",
                        data: {},

                        dataType: "json",
                        success: function (response) {
                            // console.log(response);
                            response.forEach((element) => { //每個資料的名字
                                element.Date = element.Date.substr(0, 10);
                                _this.BackNewsList.push(element);
                            });
                        },
                        error: function (exception) {
                            alert("發生錯誤: " + exception.status);
                        },
                    });

                },
            },
        });
        app1.mount(".app1");
    </script>
    <script>
        $(function () {
            $("#datepicker").datepicker();
        });
    </script>

    <!-- 縮圖預覽 -->
    <script>
        function openFile(event) {
            var input = event.target; //取得上傳檔案
            var reader = new FileReader(); //建立FileReader物件

            reader.readAsDataURL(input.files[0]); //以.readAsDataURL將上傳檔案轉換為base64字串

            reader.onload = function () { //FileReader取得上傳檔案後執行以下內容
                var dataURL = reader.result; //設定變數dataURL為上傳圖檔的base64字串
                $('#output').attr('src', dataURL).show(); //將img的src設定為dataURL並顯示
            };
        }
    </script>
</body>

</html>